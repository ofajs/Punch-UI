<template component>
  <style>
    :host {
      display: inline-block;
      --loading-size: 3rem;
    }

    .p-loading {
      width: var(--loading-size);
      height: var(--loading-size);
      display: block;
      position: relative;
      overflow: hidden;
    }

    @keyframes p-loading-anim {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .p-loading div {
      position: absolute;
      width: calc(var(--loading-size) * 0.8);
      height: calc(var(--loading-size) * 0.8);
      border: calc(var(--loading-size) / 10 * 0.8) solid var(--pui-main-color);
      border-top-color: transparent;
      border-radius: 50%;
      animation: p-loading-anim 1s linear infinite;
      box-sizing: content-box;
    }
  </style>
  <div class="p-loading">
    <div></div>
  </div>
  <script>
    export default {
      tag: "p-loading",
      attrs: {
        type: "primary",
      },
      watch: {
        type(type) {
          if (type) {
            this.style.setProperty("--pui-main-color", `var(--pui-${type}-color)`);
          }
        },
      },
    };
  </script>
</template>
