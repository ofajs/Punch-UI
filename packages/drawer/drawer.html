<template component>
  <style>
    :host {
      display: block;
      font-size: 14px;
    }
    .main {
      box-sizing: border-box;
      padding: calc(var(--pui-space-y) * 6) calc(var(--pui-space-x) * 4);
      /* border-radius: var(--dialog-border-radius, 30px); */
      background-color: var(--md-sys-color-on-normal);
      width: var(--dialog-width, 320px);
    }

    .container {
      display: contents;
    }

    .container[pos="left"] .main,
    .container[pos="right"] .main {
      height: 100%;
    }

    .container[pos="top"] .main,
    .container[pos="bottom"] .main {
      width: 100%;
    }

    .inner {
      display: block;
      opacity: 0;
      transition: opacity ease 0.3s;
      transition-delay: 0.2s;
    }
    .inner.showall {
      opacity: 1;
    }

    .container[pos="left"] {
      --container-align-items: flex-start;
      --container-justify-content: flex-start;
      --container-init-transform: translate(0, -0) scale(0, 1);
    }
    .container[pos="left"] .main {
      border-radius: 0 var(--dialog-border-radius, 30px)
        var(--dialog-border-radius, 30px) 0;
    }

    .container[pos="left"] p-mask::part(container) {
      transform-origin: 0 50%;
    }
  </style>
  <l-m src="../dialog/mask.html"></l-m>

  <div class="container" attr:pos="pos">
    <p-mask
      sync:open="open"
      sync:mask-id="maskId"
      on:click-mask="emit('click-mask',{bubbles:false})"
    >
      <div class="main" part="main">
        <div class="inner" class:showall="open">
          <slot></slot>
        </div>
      </div>
    </p-mask>
  </div>
  <script>
    export default {
      tag: "p-drawer",
      attrs: {
        pos: "left",
      },
      data: {
        open: false,
        maskId: 1000,
      },
    };
  </script>
</template>
