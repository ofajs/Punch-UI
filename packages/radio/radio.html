<template component>
  <style>
    :host {
      display: inline-block;
      vertical-align: top;
    }
    .container {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }
    [placement="top"] {
      flex-direction: column;
    }
    [placement="bottom"] {
      flex-direction: column-reverse;
    }
    [placement="end"] {
      flex-direction: row-reverse;
    }
    .radio-con {
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
      width: 40px;
      height: 40px;
    }
    .radio {
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
      border-radius: 13px;
      border: var(--pui-normal-color) solid 2px;
    }
    .point {
      width: 0;
      height: 0;
      border-radius: 8px;
      background-color: var(--pui-primary-color);
      transition: all cubic-bezier(0.25, 0.1, 0.36, 1.63) 0.2s;
    }
    .container.checked .radio {
      border-color: var(--pui-primary-color);
    }

    .container.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .radio {
      width: 20px;
      height: 20px;
    }

    .container.checked .point {
      width: 10px;
      height: 10px;
    }

    .container[size="small"] .radio {
      width: 16px;
      height: 16px;
    }

    .container[size="small"].checked .point {
      width: 7px;
      height: 7px;
    }

    .container[size="large"] .radio {
      width: 24px;
      height: 24px;
    }

    .container[size="large"].checked .point {
      width: 13px;
      height: 13px;
    }
  </style>
  <div
    class="container"
    class:disabled="isDisabled"
    class:checked="typeof checked === 'string'"
    attr:placement="placement"
    attr:size="size"
    on:click="clickCheck"
  >
    <div class="radio-con">
      <div class="radio">
        <div class="point"></div>
      </div>
    </div>
    <div class="label"><slot></slot></div>
  </div>
  <script>
    import "../init.js";
    export default {
      tag: "p-radio",
      attrs: {
        size: null,
        disabled: null,
        checked: null,
        value: null,
        // placement: "start",
        placement: null,
      },
      proto: {
        get isDisabled() {
          return typeof this.disabled === "string";
        },
        clickCheck() {
          if (this.isDisabled) {
            return;
          }
          this.checked = "";
          this.emit("checked-p-radio");
        },
      },
      attached() {
        this.emit("add-p-radio");
      },
    };
  </script>
</template>
