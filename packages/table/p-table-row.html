<template component>
  <style>
    :host {
      display: block;
      border-bottom: var(--md-sys-color-normal-container) solid 1px;
    }
    .container {
      display: flex;
      padding: calc(var(--pui-space-y) * 1.5) 0;
    }
    .fake-block {
      display: none;
      padding: calc(var(--pui-space-y) * 1.5) 0;
      opacity: 0;
    }

    :host([head][sticky]) .fake-block {
      display: block;
    }

    :host([head][sticky]) {
      border: none;
    }

    :host([head][sticky]) .container {
      position: absolute;
      width: 100%;
      left: 0;
      top: 0;
      z-index: 2;
      /* overflow: auto; */
      overflow: hidden;
      border-radius: var(--pui-border-radius) var(--pui-border-radius) 0 0;
      border-bottom: var(--md-sys-color-normal-container) solid 1px;
      background-color: var(--md-sys-color-on-normal);
    }

    :host([head][sticky]) .container::-webkit-scrollbar {
      height: 0;
    }
  </style>
  <x-if :value="head!== null">
    <style>
      ::slotted(p-table-cell) {
        font-weight: 600;
      }
    </style>
  </x-if>
  <div class="fake-block">p-table-row</div>
  <div class="container">
    <slot></slot>
  </div>
  <script>
    export default {
      attrs: {
        head: null,
        sticky: null,
      },
      proto: {
        get scrollLeft() {
          return this.shadow.$(".container").ele.scrollLeft;
        },
        set scrollLeft(val) {
          this.shadow.$(".container").ele.scrollLeft = val;
        },
      },
      ready() {
        this.on("change-cell-align", (e) => {
          if (this.head === null) {
            e.stopImmediatePropagation();
          }
        });
      },
    };
  </script>
</template>
